<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voxel Ecosystem - Complete Simulation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="header-bar">
                <h1 class="title">üß¨ VOXEL ECOSYSTEM</h1>
                <div class="header-stats">
                    <span class="header-stat">CYCLE: <strong id="generation">0</strong></span>
                    <span class="header-stat">POP: <strong id="population">0</strong></span>
                    <span class="header-stat" id="timeDisplay">‚òÄÔ∏è 12:00</span>
                    <span class="header-stat" id="seasonDisplay">üå∏ SPRING</span>
                    <span class="header-stat" id="weatherDisplay">üå§Ô∏è CLEAR</span>
                </div>
            </div>
        </header>

        <main class="main-content">
            <aside class="sidebar left-sidebar">
                <!-- Simulation Controls -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">‚ö° SIMULATION</span>
                        <span class="panel-toggle">‚ñº</span>
                    </div>
                    <div class="panel-content">
                        <div class="button-row">
                            <button class="btn btn-primary" id="playPause">
                                <span id="playPauseText">‚ñ∂ START</span>
                            </button>
                            <button class="btn" id="step">‚è≠ STEP</button>
                            <button class="btn btn-danger" id="reset">‚Üª RESET</button>
                        </div>
                        <div class="slider-row">
                            <label>SPEED</label>
                            <input type="range" id="speed" min="1" max="20" value="10">
                            <span class="value" id="speedValue">10</span>
                        </div>
                        <div class="slider-row">
                            <label>GRID</label>
                            <input type="range" id="gridSize" min="40" max="100" value="60">
                            <span class="value" id="gridSizeValue">60</span>
                        </div>
                    </div>
                </div>

                <!-- Tools -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">üîß TOOLS</span>
                        <span class="panel-toggle">‚ñº</span>
                    </div>
                    <div class="panel-content">
                        <div class="tool-grid">
                            <button class="tool-btn active" data-tool="select" title="Select & Inspect">üîç</button>
                            <button class="tool-btn" data-tool="spawn" title="Spawn Entity">‚ûï</button>
                            <button class="tool-btn" data-tool="terrain" title="Paint Terrain">üñåÔ∏è</button>
                            <button class="tool-btn" data-tool="kill" title="Remove Entity">üíÄ</button>
                        </div>
                        
                        <div class="spawn-types">
                            <div class="mini-label">SPAWN TYPE:</div>
                            <div class="spawn-grid">
                                <button class="spawn-type-btn active" data-type="1" title="Plant">üå±</button>
                                <button class="spawn-type-btn" data-type="2" title="Herbivore">üê∞</button>
                                <button class="spawn-type-btn" data-type="3" title="Carnivore">ü¶Å</button>
                                <button class="spawn-type-btn" data-type="4" title="Decomposer">üçÑ</button>
                                <button class="spawn-type-btn" data-type="6" title="Omnivore">üê∑</button>
                                <button class="spawn-type-btn" data-type="7" title="Apex">ü¶ñ</button>
                                <button class="spawn-type-btn" data-type="8" title="Parasite">ü¶†</button>
                            </div>
                        </div>
                        
                        <div class="terrain-types">
                            <div class="mini-label">TERRAIN BRUSH:</div>
                            <div class="terrain-grid">
                                <button class="terrain-btn active" data-terrain="0" title="Normal">‚¨õ</button>
                                <button class="terrain-btn" data-terrain="1" title="Water">üíß</button>
                                <button class="terrain-btn" data-terrain="2" title="Mountain">‚õ∞Ô∏è</button>
                                <button class="terrain-btn" data-terrain="3" title="Fertile">üåø</button>
                                <button class="terrain-btn" data-terrain="4" title="Barren">üèúÔ∏è</button>
                            </div>
                            <div class="slider-row">
                                <label>SIZE</label>
                                <input type="range" id="brushSize" min="1" max="5" value="2">
                                <span class="value" id="brushSizeValue">2</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Atmosphere -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">üåç ATMOSPHERE</span>
                        <span class="panel-toggle">‚ñº</span>
                    </div>
                    <div class="panel-content">
                        <div class="atmosphere-display">
                            <div class="atmo-row">
                                <span class="atmo-label">O‚ÇÇ</span>
                                <div class="atmo-bar"><div class="atmo-fill o2" id="o2Bar"></div></div>
                                <span class="atmo-value" id="o2Value">50%</span>
                            </div>
                            <div class="atmo-row">
                                <span class="atmo-label">CO‚ÇÇ</span>
                                <div class="atmo-bar"><div class="atmo-fill co2" id="co2Bar"></div></div>
                                <span class="atmo-value" id="co2Value">50%</span>
                            </div>
                        </div>
                        <div class="slider-row">
                            <label>SUN</label>
                            <input type="range" id="sunlight" min="1" max="10" value="5">
                            <span class="value" id="sunlightValue">5</span>
                        </div>
                        <div class="slider-row">
                            <label>INIT O‚ÇÇ</label>
                            <input type="range" id="initialO2" min="20" max="80" value="50">
                            <span class="value" id="initialO2Value">50%</span>
                        </div>
                    </div>
                </div>

                <!-- Heatmaps -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">üó∫Ô∏è HEATMAPS</span>
                        <span class="panel-toggle">‚ñ∂</span>
                    </div>
                    <div class="panel-content collapsed">
                        <div class="heatmap-grid">
                            <button class="heatmap-btn" data-mode="density">DENSITY</button>
                            <button class="heatmap-btn" data-mode="energy">ENERGY</button>
                            <button class="heatmap-btn" data-mode="danger">DANGER</button>
                            <button class="heatmap-btn" data-mode="fertility">FERTILITY</button>
                        </div>
                    </div>
                </div>

                <!-- Disasters -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">‚ö†Ô∏è DISASTERS</span>
                        <span class="panel-toggle">‚ñ∂</span>
                    </div>
                    <div class="panel-content collapsed">
                        <div class="disaster-grid">
                            <button class="disaster-btn btn btn-danger" data-disaster="fire">üî• FIRE</button>
                            <button class="disaster-btn btn" data-disaster="flood">üåä FLOOD</button>
                            <button class="disaster-btn btn" data-disaster="disease">ü¶† DISEASE</button>
                        </div>
                    </div>
                </div>

                <!-- Save/Load -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">üíæ SAVE/LOAD</span>
                        <span class="panel-toggle">‚ñ∂</span>
                    </div>
                    <div class="panel-content collapsed">
                        <div class="button-row">
                            <button class="btn btn-primary" id="saveBtn">üíæ SAVE</button>
                            <button class="btn" id="loadBtn">üìÇ LOAD</button>
                            <input type="file" id="loadFile" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
            </aside>

            <div class="canvas-container" id="canvasContainer">
                <canvas id="world"></canvas>
            </div>

            <aside class="sidebar right-sidebar">
                <!-- Population -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">üìä POPULATION</span>
                        <span class="panel-toggle">‚ñº</span>
                    </div>
                    <div class="panel-content">
                        <div class="species-list">
                            <div class="species-item flora">
                                <div class="species-icon"></div>
                                <span class="species-name">Plant</span>
                                <span class="species-count" id="plantCount">0</span>
                            </div>
                            <div class="species-item herbivore">
                                <div class="species-icon"></div>
                                <span class="species-name">Herbivore</span>
                                <span class="species-count" id="herbivoreCount">0</span>
                            </div>
                            <div class="species-item carnivore">
                                <div class="species-icon"></div>
                                <span class="species-name">Carnivore</span>
                                <span class="species-count" id="carnivoreCount">0</span>
                            </div>
                            <div class="species-item omnivore">
                                <div class="species-icon"></div>
                                <span class="species-name">Omnivore</span>
                                <span class="species-count" id="omnivoreCount">0</span>
                            </div>
                            <div class="species-item apex">
                                <div class="species-icon"></div>
                                <span class="species-name">Apex</span>
                                <span class="species-count" id="apexCount">0</span>
                            </div>
                            <div class="species-item decomposer">
                                <div class="species-icon"></div>
                                <span class="species-name">Decomposer</span>
                                <span class="species-count" id="decomposerCount">0</span>
                            </div>
                            <div class="species-item parasite">
                                <div class="species-icon"></div>
                                <span class="species-name">Parasite</span>
                                <span class="species-count" id="parasiteCount">0</span>
                            </div>
                        </div>
                        <div class="stats-row">
                            <span>Biodiversity:</span>
                            <span id="biodiversity">0%</span>
                        </div>
                        <div class="stats-row">
                            <span>Avg Fitness:</span>
                            <span id="avgFitness">0.00</span>
                        </div>
                    </div>
                </div>

                <!-- Population Graph -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">üìà GRAPH</span>
                        <span class="panel-toggle">‚ñº</span>
                    </div>
                    <div class="panel-content">
                        <div class="graph-container">
                            <canvas id="populationGraph" width="220" height="120"></canvas>
                        </div>
                        <div class="graph-legend">
                            <span class="legend-item flora">‚óè</span>
                            <span class="legend-item herbivore">‚óè</span>
                            <span class="legend-item carnivore">‚óè</span>
                            <span class="legend-item omnivore">‚óè</span>
                            <span class="legend-item apex">‚óè</span>
                        </div>
                    </div>
                </div>

                <!-- Entity Inspector -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">üî¨ INSPECTOR</span>
                        <span class="panel-toggle">‚ñº</span>
                    </div>
                    <div class="panel-content">
                        <div id="entityInspector">
                            <div class="inspector-empty">Click an entity to inspect</div>
                        </div>
                    </div>
                </div>

                <!-- Spawn Density -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">üå± SPAWN DENSITY</span>
                        <span class="panel-toggle">‚ñ∂</span>
                    </div>
                    <div class="panel-content collapsed">
                        <div class="slider-row">
                            <label class="label-flora">PLANT</label>
                            <input type="range" id="plantDensity" min="0" max="30" value="12">
                            <span class="value" id="plantDensityValue">12%</span>
                        </div>
                        <div class="slider-row">
                            <label class="label-herbivore">HERB</label>
                            <input type="range" id="herbivoreDensity" min="0" max="15" value="4">
                            <span class="value" id="herbivoreDensityValue">4%</span>
                        </div>
                        <div class="slider-row">
                            <label class="label-carnivore">CARN</label>
                            <input type="range" id="carnivoreDensity" min="0" max="10" value="2">
                            <span class="value" id="carnivoreDensityValue">2%</span>
                        </div>
                        <div class="slider-row">
                            <label class="label-omnivore">OMNI</label>
                            <input type="range" id="omnivoreDensity" min="0" max="10" value="1">
                            <span class="value" id="omnivoreDensityValue">1%</span>
                        </div>
                        <div class="slider-row">
                            <label class="label-apex">APEX</label>
                            <input type="range" id="apexDensity" min="0" max="5" value="0.5" step="0.1">
                            <span class="value" id="apexDensityValue">0.5%</span>
                        </div>
                        <div class="slider-row">
                            <label class="label-decomposer">DECOM</label>
                            <input type="range" id="decomposerDensity" min="0" max="10" value="2">
                            <span class="value" id="decomposerDensityValue">2%</span>
                        </div>
                        <div class="slider-row">
                            <label class="label-parasite">PARA</label>
                            <input type="range" id="parasiteDensity" min="0" max="5" value="0.5" step="0.1">
                            <span class="value" id="parasiteDensityValue">0.5%</span>
                        </div>
                    </div>
                </div>

                <!-- Presets -->
                <div class="panel">
                    <div class="panel-header" onclick="togglePanel(this)">
                        <span class="panel-title">üéÆ PRESETS</span>
                        <span class="panel-toggle">‚ñº</span>
                    </div>
                    <div class="panel-content">
                        <div class="preset-grid">
                            <button class="btn btn-preset active" data-preset="balanced">BALANCED</button>
                            <button class="btn btn-preset" data-preset="jungle">JUNGLE</button>
                            <button class="btn btn-preset" data-preset="predator">PREDATOR</button>
                            <button class="btn btn-preset" data-preset="barren">BARREN</button>
                            <button class="btn btn-preset" data-preset="outbreak">OUTBREAK</button>
                            <button class="btn btn-preset" data-preset="extinction">EXTINCTION</button>
                        </div>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
